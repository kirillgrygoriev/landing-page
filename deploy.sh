#!/bin/bash

# –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–µ–ø–ª–æ—é
SERVER_USER="flowsua"
SERVER_IP="188.40.219.139"
SERVER_PATH="www647.your-server.de"  # –ù–∞–ø—Ä–∏–∫–ª–∞–¥: /var/www/flowsuite.tech

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó build
if [ ! -d "build" ]; then
  echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è build –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞. –°–ø–æ—á–∞—Ç–∫—É –≤–∏–∫–æ–Ω–∞–π—Ç–µ npm run build"
  exit 1
fi

# –î–µ–ø–ª–æ–π —Ñ–∞–π–ª—ñ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
echo "üöÄ –ü–æ—á–∞—Ç–æ–∫ –¥–µ–ø–ª–æ—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä $SERVER_IP..."
rsync -avz --delete build/ $SERVER_USER@$SERVER_IP:$SERVER_PATH

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
if [ $? -eq 0 ]; then
  echo "‚úÖ –î–µ–ø–ª–æ–π —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
else
  echo "‚ùå –í–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞ –ø—ñ–¥ —á–∞—Å –¥–µ–ø–ª–æ—é."
  exit 1
fi